/*
*@demonsleep 20180316 1.2修复已知问题
*/
$(function(){$.fn.initOne("bbusername");JPlaceHolder.init()});var JPlaceHolder={_check:function(){return"placeholder" in document.createElement("input")},init:function(){if(document.all){$('input[type="text"]').each(function(){var a=this;if(this.attachEvent){this.attachEvent("onpropertychange",function(b){if(b.propertyName!="value"){return}$(a).trigger("input")})}})}if(!this._check()){this.fix()}},fix:function(){jQuery(":input[placeholder]").each(function(f,e){var c=$(this),a=c.attr("placeholder");c.wrap($("<div></div>").css({position:"relative",zoom:"1",border:"none",background:"none",padding:"none",margin:"none"}));var i=c.position(),g=c.outerHeight(true),b=c.css("padding-left");var d=$("<span></span>").text(a).css({position:"absolute",left:i.left,top:i.top,height:g,lienHeight:g,paddingLeft:b,color:"#aaa"}).appendTo(c.parent());c.focusin(function(h){d.hide()}).focusout(function(h){if(!c.val()){d.show()}});d.click(function(h){d.hide();c.focus()})})}};(function(d){var f;var w=d("#captcha-box");var v="https://my.fengniao.com";var p=300;var t;var h;var b;var j;var g;var u=60;var c=60;var l=0;var s=d(".loginNewBox");var n=d(".logonList");var e=window.location.href;var q=d(".userName5").val();var r=d(".password").val();var k=d(".phone").val();var o=d(".phoneCode").val();var i='<div class="loginShareBox"> <a href="https://my.fengniao.com/loginThirdParty.php?id=1&url='+e+'" target="_self"  class="weiBo loginIcon">微博登录</a><a href="https://my.fengniao.com/loginThirdParty.php?id=3&url='+e+'" target="_self" class="qqLogin loginIcon">qq登录</a> </div>';var m='<span class="global-weclome-tip">您好，</span><ul id="globaSitePersonNav" class="global-sitenav J_globalSitenav"><li class="global-item"><span class="trigger user-name" id="user-name">'+f+'<i class="triangle-icon"></i></span><div class="dropdown-items" style="display: none;"><ul class="global-site-items"><li class="global-site-item"><a href="https://my.fengniao.com/">个人中心</a></li><li class="global-site-item"><a href="https://my.fengniao.com/album.php">我的相册</a></li><li class="global-site-item"><a href="https://my.fengniao.com/thread.php">我的论坛</a></li><li class="global-site-item"><a href="https://my.fengniao.com/friend.php">我的好友</a></li><li class="global-site-item"><a href="https://my.fengniao.com/photoCollection.php">我的收藏</a></li><li class="global-site-item"><a href="http://huodong.fengniao.com/my">我的活动</a></li><li class="global-site-item"><a href="http://2.fengniao.com/user/index">我的交易</a></li></ul></div></li><li class="global-item" id="xiaoxi_num"><span class="global-num" style="display:none" id="global-num"><i class="global-icon"></i></span><span class="trigger" id="xiaoxi_nums">提醒<i class="triangle-icon"></i></span><div class="dropdown-items" style="display: none;"><ul class="global-site-items"><li class="global-site-item"><a href="https://my.fengniao.com/messages.php" class="priv">我的私信<em id="priy"></em></a></li><li class="global-site-item"><a href="https://my.fengniao.com/bbsReply.php" class="reply">论坛回复<em id="reply"></em></a></li><li class="global-site-item"><a href="https://my.fengniao.com/station_letter.php" class="station">全站通知<em id="station"></em></a></li><li class="global-site-item"><a href="https://my.fengniao.com/notice.php" class="pm">系统消息<em id="pm"></em></a></li><li class="global-site-item"><a href="https://my.fengniao.com/integration_letter.php" class="integral">积分提醒<em id="integral"></em></a></li></ul></div></li></ul><a href="javascript:;" id="logout" class="global-login-out" target="_self">退出</a>';var a={TanBox:".loginTanBox",Box:".loginNewBox",List:".logonList",hintWord:".hintWord",picErWeiM:".picErWeiM",loginBtnChange:".loginBtnChange",changeTxtUl:'<ul class="loginBtnChange isErweima"> <li class="pcIcon loginIcon">pc登录</li> <li class="erweimaIcon loginIcon">二维码登录</li> </ul>',loginErWeiMBox:'<div class="loginErWeiM logonList"> <b class="tit">微信扫码  安全登录</b> <span class="picErWeiM"> <img src="https://icon.fengniao.com/login/images/erweima001.png" width="222" height="222"> </span> <p>请打开微信  扫一扫登录</p> <a href="javascript:;" target="_self" class="refreshBtn"><i class="loginIcon">刷新</i>刷新二维码</a> <a href="javascript:;" target="_self" class="changeTxtBtn toRegister">注册新账号</a> </div>',loginNumBox:'<div class="loginNum logonList"> <h4 class="titLineBox"> <hr> <b class="txt">推荐使用<a class="toLoginErweima01" href="javascript:;" target="_self"><i class="loginIcon">0</i>微信扫码</a>  登录 , 安全快捷</b> </h4> <a href="javascript:;" target="_self" class="markTit toLoginPhone">短信快速登录</a> <ul class="labelBox"> <li> <input type="text" class="userName userName2 userName5" name="userName" value="手机号/用户名/邮箱"> <div class="hintWord">用户名长度为2-14位字符或1-7个汉字</div> </li> <li> <input type="password" class="password password2" name="password"  placeholder="" value=""> <div class="hintWord"></div> </li> <li class="txtBox"> <a  href="javascript:;" target="_self" class="forgetPassW">忘记密码？</a> <input type="checkbox" value="" id="isRemember"> <label for="isRemember">记住我</label> </li> <li class="submitBtnBox"> <input type="submit" class="loginSubmitBtn loginBtn01" value="登录"> </li> </ul> <h4 class="titLineBox"> <hr> <b class="txt">第三方登录</b> </h4> '+i+' <a href="javascript:;" target="_self" class="changeTxtBtn toRegister">注册新账号</a> </div>',loginPhoneBox:'<div class="loginPhone logonList"> <h4 class="titLineBox"> <hr> <b class="txt">推荐使用<a class="toLoginErweima01" href="javascript:;" target="_self"><i class="loginIcon">0</i>微信扫码</a>  登录 , 安全快捷</b> </h4> <a href="javascript:;" target="_self" class="markTit toLoginNum">账号密码登录</a> <ul class="labelBox"> <li> <input type="text" class="phone phone2" name="phone" value="请输入大陆手机号"> <div class="hintWord">用户名长度为2-14位字符或1-7个汉字</div> </li> <li class="phoneCodeLi"> <a href="javascript:;" target="_self" data-id="3" class="getPhoneCode">获取验证码</a> <input type="text" class="phoneCode" name="phoneCode" value="请输入短信验证码"> <div class="hintWord"></div> </li> <li class="txtBox"> 注意：如果您已注册过蜂鸟账号，请确认该手机号和账号做了绑定，否则系统将自动创建新账号 </li> <li class="submitBtnBox"> <input type="submit" class="loginSubmitPhoneBtn loginBtn01" value="登录"> </li> </ul> <h4 class="titLineBox"> <hr> <b class="txt">第三方登录</b> </h4> '+i+' <a href="javascript:;" target="_self" class="changeTxtBtn toRegister">注册新账号</a> <input name="onlycode" id="onlycode" type="hidden" value="" class="text"></div>',loginRegisterBox:'<div class="loginRegister logonList"> <h4 class="titLineBox"> <hr><b class="txt">快速注册</b> </h4> <ul class="labelBox"> <li> <input type="text" class="userName userName5 userName1" name="userName" value="请输入用户名"> <div class="hintWord">用户名长度为2-14位字符或1-7个汉字</div> </li> <li> <input type="password" class="password password1" name="password" placeholder="" value=""> <div class="hintWord"></div> </li> <li> <input type="text" class="phone phone1" name="phone" value="请输入大陆手机号"> <div class="hintWord">用户名长度为2-14位字符或1-7个汉字</div> </li> <li class="phoneCodeLi"> <a href="javascript:;" target="_self" class="getPhoneCode" data-id="1">获取验证码</a> <input type="text" class="phoneCode" name="phoneCode" value="请输入短信验证码"> <div class="hintWord"></div> </li> <li class="txtBox isAgreeTxtBtn"> <input type="checkbox" value="" id="isAgree"> <label for="isAgree">我已阅读并同意 <a href="https://www.fengniao.com/law.html" target="_blank">《蜂鸟用户注册协议》</a> </label><div class="hintWord"></div> </li> <li class="submitBtnBox"> <input type="submit" class="registerSubmitBtn registerSubmitBtnNo loginBtn01" value="注册"> </li> </ul> <span class="isHaveToLogin">已有账号？返回 <a href="javascript:;" target="_self">登录</a></span> </div>',loginForget:'<div class="loginForget logonList"><h4 class=titLineBox><hr><b class=txt>找回密码</b></h4><ul class=labelBox id=forgetFirst><li><input type=text class=text-long id=name value="请输入已绑定的手机号或邮箱"><div class=hintWord>请输入已绑定的手机号或邮箱</div><li class=phoneCodeLi><img src='+v+'/ajax/code.php?sdklfdlsf id=refreshCode><input type=text class=duanCode id=code value="请输入右侧验证码"><a href="javascript:;" target="_self" id=changeCode>换一张</a><div class=hintWord></div><li class=submitBtnBox><input type=submit class=loginBtn01 id=forgetFirstBtn value="下一步"><li class=rightTxt><a href="javascript:;" target="_self" id="noGetPhoneEmail">手机或邮箱不可用了？</a></ul><ul class=labelBox id=forgetSecond><li><span class=numberUser>18810827876</span><a href="javascript:;" target=_self class=reWriteNumber>修改</a><li class="phoneCodeLi"><a href="javascript:;" target=_self class="getCode getForgetCode">获取验证码</a><input type=text class=duanCode id=secondCode value="请输入验证码"><div class=hintWord>请输入已绑定的手机号或邮箱</div><li class=submitBtnBox><input type=submit class=loginBtn01 id=forgetSecondBtn value="下一步"><li class=rightTxt><a  href="javascript:;" target="_self"  id="noGetPhoneEmail">手机或邮箱不可用了？</a></ul><ul class=labelBox id=forgetThird><li><input type=password class=text-long id=password placeholder="" value=""><div class=hintWord>请您输入新密码</div><li><input type=password class=text-long id=checkpassword placeholder="" value=""><div class=hintWord>请确认新密码</div><li class=submitBtnBox><input type=submit class=loginBtn01 id=forgetThirdBtn value="重置密码"></ul><span style="cursor: pointer;" class="changeTxtBtn toLogin02">已有账号？返回 <a  href="javascript:;" target="_self" style="color: #ff4b4b;">登录</a></span></div>',loginForgetSuccess:'<div class="loginForgetSuccess logonList"><div class=tanTxtIn><span class=loginIcon>0</span><div class=txt01><b>新密码设置成功！</b><span class=red>登录成功</span><span><i class=numSecond>5</i>s后自动登录</span></div></div></div>',loginForgetCannot:'<div class="loginForgetCannot logonList"><div class=tanTxtIn><div class="txt01 txtCenter"><span>请联系客服找回密码，或重新注册蜂鸟账号。邮箱 shao.xinmei@fengniao.com</span></div></div><span style="cursor: pointer;" class="changeTxtBtn toLogin02">已有账号？返回 <a  href="javascript:;" target="_self" style="color: #ff4b4b;">登录</a></span></div>'};d.fn.extend({initOne:function(x){d.fn.removejscssfile("https://icon.fengniao.com/public/js/public_header.js?2","js");jQuery.getScript("https://static.geetest.com/static/tools/gt.js");jQuery.getScript("https://my.fengniao.com/icon/js/md5.js");jQuery.getScript("https://my.fengniao.com/icon/js/jquery.cookie.js",function(){d.fn.cleatTime();var y=d.fn.topReadCookie(x);if(y){d.fn.successLogin(y);d("#globaSitePersonNav li").hover(function(){d(this).find(".dropdown-items").show()},function(){d(this).find(".dropdown-items").hide()})}else{d("#xiding").html('<ul class="login-box"><li><a href="javascript:;" class="login-link" target="_self"><i class="icon"></i>登录</a></li><li><a href="javascript:;" target="_self" class="registerBtn">免费注册</a></li></ul>');d(".login-link").showMode("login");d(".registerBtn").showMode("reg")}d("body").on("click",".isGuoQi",function(){d(this).attr("src","https://icon.fengniao.com/login/images/erweima001.png");d.fn.getErWeiMa()});d("body").on("click",".refreshBtn",function(){d.fn.getErWeiMa()});d("body").on("click",".isErrorEr",function(){d.fn.getErWeiMa()});d("body").append('<input name="onlycode" id="onlycode" type="hidden" value="" class="text">');d("#weChatBox li").hover(function(){d(this).find(".QR-code").show()},function(){d(this).find(".QR-code").hide()});d("#globaSiteNav li").hover(function(){d(this).addClass("hover");d(this).find(".dropdown-items").show()},function(){d(this).removeClass("hover");d(this).find(".dropdown-items").hide()});z();d(window).scroll(function(){z()});function z(){if(d(document).scrollTop()>0){d(".global-topnav").css("position","fixed")}else{d(".global-topnav").css("position","relative")}}})},showMode:function(y){var z=d.extend({},a);var x;d.fn.cleatTime();this.bind("click",function(){if(l==0){d("<link>").attr({rel:"stylesheet",type:"text/css",href:"https://icon.fengniao.com/login/css/loginCss.css"}).appendTo("head");d("body").append('<div class="loginTanBox"><div class="loginBlack"></div><div class="loginNewBox"><div class="loginHeader"> <span class="close loginIcon">0</span> <h3 class="logo1 loginIcon">0</h3> </div></div></div>');l=1}switch(y){case"login":x=1;d(z.Box).append(z.loginErWeiMBox);d(z.Box).append(z.changeTxtUl);d.fn.getErWeiMa();break;case"reg":d(z.Box).append(z.loginRegisterBox);d(z.Box).append(z.changeTxtUl);d(".loginBtnChange").hide();x=2;break}d("body").on("click",".forgetPassW",function(){d(z.List).remove();d(z.Box).append(z.loginForget)});d.fn.focusBlur(".userName2","手机号/用户名/邮箱");d.fn.focusBlur(".userName1","请输入用户名");d.fn.focusBlur(".phone1","请输入大陆手机号");d.fn.focusBlur(".phone2","请输入大陆手机号");d.fn.focusBlur(".phoneCode","请输入短信验证码");d.fn.focusBlur("#name","请输入已绑定的手机号或邮箱");d.fn.focusBlur("#code","请输入右侧验证码");d.fn.focusBlur("#secondCode","请输入验证码");d.fn.focusBlurPass(".password1","password01.png");d.fn.focusBlurPass(".password2","password01.png");d.fn.focusBlurPass("#password","password02.png");d.fn.focusBlurPass("#checkpassword","password03.png");d("body").on("click",".loginNewBox .loginHeader .close",function(){d.fn.closeBox()});d("body").on("click",".loginSubmitBtn",function(){d.fn.toLogin()});d.fn.changeLoginType(".toLogin02",z.loginErWeiMBox,1);d("body").on("click",".loginSubmitPhoneBtn",function(){d.fn.toMessageLogin()});d("body").on("click",".loginBtnChange",function(){d.fn.changeBtnType()});d("body").on("click",".registerSubmitBtn",function(){d.fn.registerLogin()});d("body").on("click",".reWriteNumber",function(){d.fn.forgetPassBackOne()});d("body").on("click","#isAgree",function(){var B=d(this).parents("li");if(d(this).hasClass("isAgreeTxtBtnYes")){d(this).removeAttr("checked");d(this).removeClass("isAgreeTxtBtnYes");B.addClass("warnTxt");d(".loginNewBox .loginRegister").find(".registerSubmitBtn").addClass("registerSubmitBtnNo")}else{d(this).attr("checked","checked");d(this).addClass("isAgreeTxtBtnYes");B.removeClass("warnTxt");B.find(a.hintWord).hide();d(".loginNewBox .loginRegister").find(".registerSubmitBtn").removeClass("registerSubmitBtnNo")}});d.fn.changeLoginType(".toRegister",z.loginRegisterBox,2);d.fn.changeLoginType(".toLoginPhone",z.loginPhoneBox);d.fn.changeLoginType(".toLoginNum",z.loginNumBox);d.fn.changeLoginType(".isHaveToLogin",z.loginErWeiMBox,1);d.fn.changeLoginType(".toLoginErweima01",z.loginErWeiMBox,1);d.fn.changeLoginType(".forgetPassW",z.loginForget,3);d("body").on("input propertychange change",".phone1",d.fn.phoneTime);d("body").on("input propertychange change",".phone2",d.fn.phoneTime);var A=function(C){var E;var B=d.fn.hintWord;C.appendTo(w);C.onSuccess(function(){var F=C.getValidate();d.ajax({url:v+"/ajax/SecondVerify.php",type:"get",dataType:"jsonp",data:{type:"login",geetest_challenge:F.geetest_challenge,geetest_validate:F.geetest_validate,geetest_seccode:F.geetest_seccode},success:function(H){if(H.status==="success"){d("#onlycode").val(H.onlycode);var I=d(".getPhoneCode");I.addClass("sendBtnTime");I.addClass("sendBtnAfterIs");I.removeClass("sendBtnAfter");I.html(u+"s");var G=setInterval(function(){if(u==0){var J=d(".phone").val();if(J==""){I.html("获取验证码")}else{if(!d.fn.isPhoneNo(J)){I.addClass("sendBtnNo");I.removeClass("sendBtnAfter");I.removeClass("sendBtnAfterIs")}else{I.removeClass("sendBtnNo");I.addClass("sendBtnAfter")}}I.removeClass("sendBtnTime");I.html("获取验证码");clearInterval(G);u=c}else{u--;I.html(u+"s")}},1000);d.fn.getSendCode(E)}else{return false}}})});d("body").on("click",".getPhoneCode",D);function D(){var H=d.extend({},a);var I=d(".getPhoneCode");var G=d(".phone").val();var F=H.hintWord;E=parseInt(I.attr("data-id"));if(G){if(I.hasClass("sendBtnAfter")){C.show()}else{if(I.hasClass("sendBtnNo")){d(".phone").siblings(F).show().html("*请输入正确手机号码").show()}else{if(I.hasClass("sendBtnTime")){alert("稍等片刻哦~")}else{d(".phone").siblings(F).show().html("*请输入手机号码").show()}}}}else{d(".phone").siblings(F).show().html("*请输入手机号码").show()}}};d.ajax({url:v+"/ajax/StartCaptchaServlet.php?type=login&t="+(new Date()).getTime(),type:"get",dataType:"jsonp",jsonpCallback:"dataBox",success:function(B){initGeetest({gt:B.gt,challenge:B.challenge,product:"popup",offline:!B.success},A)}});d("body").on("click",".hintWord",d.fn.hintWord)})},getErWeiMa:function(y){var x=d.extend({},a);var A="";var z=d(x.picErWeiM);z.find("img").removeClass("isGuoQi");d.ajax({url:v+"/ajax/wechatLoginQrcode.php",type:"post",data:{type:1},dataType:"jsonp",success:function(B){if(B.code==1){A=B.data.ticket;z.find("img").attr("src",B.data.qrcode_url);var C=0;t=setInterval(function(){C++;if(C==p){d.fn.cleatTime();z.find("img").attr("src","https://icon.fengniao.com/login/images/erweima002.jpg");z.find("img").addClass("isGuoQi");d.fn.cleatTime()}},1000);h=setInterval(function(){d.ajax({url:v+"/ajax/wechatLoginQrcode.php",type:"post",data:{type:2,ticket:A},dataType:"jsonp",success:function(D){if(D.code==1){d.fn.successLogin(D.bbusername)}else{}},cache:false})},2000)}else{if(B.code==-1){d.fn.cleatTime();z.find("img").attr("src","https://icon.fengniao.com/login/images/erweima003.jpg");z.find("img").addClass("isErrorEr")}}},cache:false});return false},toLogin:function(){d.fn.checkInputDefaultVal();var z=d(".userName2");var y=d(".password");var x=d.fn.hintWord;if(q){if(r){d.ajax({url:v+"/ajax/ajaxLogin.php",data:"from=login&name="+q+"&password="+hex_md5(r),type:"POST",dataType:"jsonp",jsonpCallback:"dataBox",success:function(A){if(A.code==1){d.fn.successLogin(q)}else{if(A.code==-1){z.siblings(x).show().html("*"+A.msg)}else{if(A.code==-2){y.siblings(x).show().html("*"+A.msg)}else{if(A.code==-3){z.siblings(x).show().html("*"+A.msg)}else{if(A.code==-6){z.siblings(x).show().html("*"+A.msg)}else{if(A.code==-7){y.siblings(x).show().html("*您输入的密码有误");y.val("")}}}}}}},cache:false})}else{y.siblings(x).show().text("*请您输入密码")}}else{z.siblings(x).show().text("*请您输入手机/用户名/邮箱")}},toMessageLogin:function(){var y=d.extend({},a);k=d(".phone").val();o=d(".phoneCode").val();var x=y.hintWord;if(k){if(o){if(/^1\d{10}$/m.test(k)){if(/^\d{6}$/m.test(o)){d.ajax({url:v+"/ajax/ajaxRegister.php",data:"from=phoneLogin&phone="+k+"&code="+o,type:"POST",dataType:"jsonp",success:function(z){if(z.code==1||z.code==2){d.fn.successLogin(k)}else{if(z.code==-1||z.code==-4){d(".phoneCode").siblings(x).show().html("*"+z.msg)}else{if(z.code==-2){d(".phoneCode").siblings(x).show().html("*动态密码不可为空")}else{if(z.code==-13||z.code==-14){d(".phoneCode").siblings(x).show().html("*动态密码错误");d(".phoneCode").val("")}else{if(z.code==-7||z.code==-3||z.code==-10){d(".phone").siblings(x).show().html("*"+z.msg)}}}}}},cache:false})}else{d(".phoneCode").siblings(x).show().html("*动态密码错误");d(".phoneCode").val("")}}else{d(".phone").siblings(x).show().html("*请输入正确的手机号码")}}else{d(".phoneCode").siblings(x).show().html("*请输入正确的验证码")}}else{d(".phone").siblings(x).show().html("*请输入手机号")}},registerLogin:function(){d.fn.cleatTime();var z=d.extend({},a);var y=d(".isAgreeTxtBtn");var A=d(".registerSubmitBtn");if(A.hasClass("registerSubmitBtnNo")){y.addClass("warnTxt");y.find(z.hintWord).show().html("*请先查看并同意蜂鸟注册协议")}else{var x=z.hintWord;d.fn.checkInputDefaultVal();q=d.trim(q);if(q){if(r){if(r.length>=6&&r.length<=16){if(/^[0-9a-zA-Z!@#$%^&*()_+|?\/-=]{6,16}$/m.test(r)){if(!/^[0-9]{6,16}$/m.test(r)){if(k){if(o){d.ajax({url:v+"/ajax/ajaxRegister.php",data:"from=registerPhone&username="+q+"&password="+hex_md5(r)+"&phone="+k+"&code="+o,type:"POST",dataType:"jsonp",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(B){if(B.code==1){d.fn.successLogin(encodeURI(q))}else{if(B.code==-1){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-2){d(".password").siblings(x).show().html("*"+B.msg)}else{if(B.code==-3){d(".phone").siblings(x).show().html("*"+B.msg)}else{if(B.code==-4){d(".phoneCode").siblings(x).show().html("*"+B.msg)}else{if(B.code==-5){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-6){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-7){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-8){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-9){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-10){d(".userName1").siblings(x).show().html("*"+B.msg)}else{if(B.code==-11){d(".phone").siblings(x).show().html("*"+B.msg)}else{if(B.code==-12){d(".phone").siblings(x).show().html("*"+B.msg)}else{if(B.code==-13){d(".phoneCode").siblings(x).show().html("*"+B.msg)}else{if(B.code==-14){d(".phoneCode").siblings(x).show().html("*"+B.msg)}else{if(B.code==-16){d(".phone").siblings(x).show().html("*"+B.msg)}else{if(B.code==-15){d(".phone").siblings(x).show().html("*"+B.msg)}}}}}}}}}}}}}}}}}},cache:false})}else{d(".phoneCode").siblings(x).show().html("*请输入验证码")}}else{d(".phone").siblings(x).show().html("*请输入手机号")}}else{d(".password").siblings(x).show().html("*密码不能为纯数字")}}else{d(".password").siblings(x).show().html("*密码不能包含特殊字符")}}else{d(".password").siblings(x).show().html("*密码长度为6-16位字符")}}else{d(".password").siblings(x).show().html("*请输入密码")}}else{d(".userName1").siblings(x).show().html("*请输入用户名")}}},checkInputDefaultVal:function(){q=d(".userName5").val();r=d(".password").val();k=d(".phone").val();o=d(".phoneCode").val();if(q=="手机号/用户名/邮箱"){q=""}else{if(q=="请输入用户名"){q=""}else{q=encodeURI(d(".userName5").val())}}if(r=="请输入密码"){r=""}if(k=="请输入大陆手机号"){k=""}if(o=="请输入短信验证码"){o=""}},forgetPass:function(){var y=d.extend({},a);g=d("#name").val();var x=d("#code").val();if(g=="请输入已绑定的手机号或邮箱"){g=""}if(x=="请输入右侧验证码"){x=""}if(g){if(x){d.ajax({url:v+"/ajax/ajaxRegister.php",data:"from=resetOne&name="+g+"&code="+x,dataType:"jsonp",type:"POST",success:function(z){if(z.code==1){$name=g;$type=z.content.type;if($type==1){d(".getForgetCode").text("获取短信验证码")}else{d(".getForgetCode").text("获取邮件验证码")}d(".numberUser").text(g);d("#forgetFirst").hide();d("#forgetSecond").show()}else{if(z.code==-1){d("#code").parents("li").find(y.hintWord).show().html("*"+z.msg);d("#code").val("");d.fn.refreshCode()}else{d("#name").parents("li").find(y.hintWord).show().html("*"+z.msg);d.fn.refreshCode()}}},cache:false})}else{d("#code").parents("li").find(y.hintWord).show().html("*请填写右侧验证码");d("#code").val("")}}else{d("#name").parents("li").find(y.hintWord).show().html("*请填写您的手机号或者邮箱")}},forgetPassTwo:function(){var y=d.extend({},a);var x=d("#secondCode").val();if(x){d.ajax({url:v+"/ajax/ajaxRegister.php",data:"from=resetTwo&type="+$type+"&contact="+$name+"&code="+x,type:"POST",dataType:"jsonp",success:function(z){console.log(z);if(z.code==1){d("#forgetSecond").hide();d("#forgetThird").show()}else{d("#secondCode").parents("li").find(y.hintWord).show().html("*"+z.msg)}},cache:false})}else{d("#secondCode").parents("li").find(y.hintWord).show().html("*请输入验证码")}},forgetPassBackOne:function(){d.fn.refreshCode();d.fn.cleatTime();d(".getForgetCode").removeClass("sendBtnNo");d(".getForgetCode").removeClass("sendBtnAfterIs");d("#forgetSecond").hide();d("#forgetFirst").show();d("#name").focus();d("#code").val("请输入右侧验证码")},forgetPassThree:function(){var z=d.extend({},a);var x=d("#password").val();var y=d("#secondCode").val();var A=d("#checkpassword").val();if(x){if(x.length>=6&&x.length<=16){if(/^[0-9a-zA-Z!@#$%^&*()_+|?/\-=]{6,16}$/m.test(x)){if(!/^[0-9]{6,16}$/m.test(x)){if(A){if(x==A){d.fn.cleatTime();d("#checkpassword").parents("li").find(z.hintWord).hide();d.ajax({url:v+"/ajax/ajaxRegister.php",data:"from=resetThree&type="+$type+"&contact="+$name+"&code="+y+"&password="+hex_md5(x),type:"POST",dataType:"jsonp",success:function(C){if(C.code==1){d(z.List).remove();d(z.Box).append(z.loginForgetSuccess);f=$name.substring(0,10);d("#xiding").html(m);d("#user-name").html(f);var B=5;j=setInterval(function(){B--;if(B==0){d.fn.cleatTime();d.fn.successLogin(g)}else{d(".numSecond").html(B)}},1000)}else{d("#password").parents("li").find(z.hintWord).show().html("*"+C.msg)}},cache:false})}else{d("#checkpassword").parents("li").find(z.hintWord).show().html("*您输入的密码与确认密码不一致")}}else{d("#checkpassword").parents("li").find(z.hintWord).show().html("*请您输入确认密码")}}else{d("#password").parents("li").find(z.hintWord).show().html("*密码不能为纯数字")}}else{d("#password").parents("li").find(z.hintWord).show().html("*密码不能包含特殊字符")}}else{d("#password").parents("li").find(z.hintWord).show().html("*密码长度为6-16位字符")}}else{d("#password").parents("li").find(z.hintWord).show().html("*请您输入密码")}},forgetPassGetCode:function(){var y=d.extend({},a);var z=d(".getForgetCode");var x=z.text();d(".getForgetCode").text("正在发送..");z.unbind("click");d.ajax({url:v+"/ajax/ajaxUser.php",data:"do=getCode&contact="+$name+"&usetype="+2+"&sendtype="+$type,type:"POST",dataType:"jsonp",success:function(A){if(A.code==1){z.addClass("sendBtnNo");z.addClass("sendBtnAfterIs");d("#secondCode").parents("li").find(y.hintWord).hide();d.fn.countDownTime(z,60,x)}else{if(A.code==-4){z.addClass("sendBtnNo");z.addClass("sendBtnAfterIs");d.fn.countDownTime(z,60,x);d(".getForgetCode").html("操作过于频繁");d("#secondCode").parents("li").find(y.hintWord).show().html("*"+A.msg)}else{if(A.code==-3){z.addClass("sendBtnNo");d(".getForgetCode").html("超过7次");d("#secondCode").parents("li").find(y.hintWord).show().html("*此号验证码超过7次,请明天再试")}else{d("#secondCode").parents("li").find(y.hintWord).show().html("*"+A.msg)}}}z.unbind("click")},cache:false})},refreshCode:function(){var y=Math.round(new Date().getTime());var x=v+"/ajax/code.php";x=x+"?"+y;d("#refreshCode").attr("src",x)},changeBtnType:function(x){var z=d(".loginBtnChange");var y=d.extend({},a);var A=d(this);d.fn.cleatTime();if(z.hasClass("isPc")){z.removeClass("isPc").addClass("isErweima");d(y.List).remove();d(y.Box).append(y.loginErWeiMBox);d.fn.getErWeiMa()}else{d.fn.cleatTime();z.removeClass("isErweima").addClass("isPc");d(y.List).remove();d(y.Box).append(y.loginNumBox)}},changeLoginType:function(x,z,A){var y=d.extend({},a);d("body").on("click",x,function(){d.fn.cleatTime();d(y.List).remove();d(y.Box).append(z);switch(A){case 1:d.fn.getErWeiMa();d(y.loginBtnChange).removeClass("isPc").addClass("isErweima").show();break;case 2:d(y.loginBtnChange).removeClass("isPc").addClass("isErweima").hide();break;case 3:d(y.loginBtnChange).removeClass("isPc").addClass("isErweima").hide();d("body").on("click","#forgetFirstBtn",function(){d.fn.forgetPass()});d("body").on("click","#refreshCode",function(){d.fn.refreshCode()});d("body").on("click","#changeCode",function(){d.fn.refreshCode()});d("body").on("click","#forgetSecondBtn",function(){d.fn.forgetPassTwo()});d("body").on("click",".getForgetCode",function(){if(d(this).hasClass("sendBtnNo")){}else{d.fn.forgetPassGetCode()}});d.fn.changeLoginType("#noGetPhoneEmail",y.loginForgetCannot,2);d("body").on("click","#forgetThirdBtn",function(){d.fn.forgetPassThree()});break;default:d.fn.cleatTime();d(y.loginBtnChange).show();d(".numberUser").html("");d("#code").val("");d("#name").val("");break}})},focusBlurPass:function(x,z){var y=d.extend({},a);d("body").on("focus",x,function(){var A=d(this).val();d(this).css("background-image","none");d(x).siblings(y.hintWord).hide()});d("body").on("blur",x,function(){var A=d(this).val();if(A){d(this).css("background-image","none")}else{d(this).css("background","url(https://icon.fengniao.com/login/images/"+z+") no-repeat 11px center")}if(x==".password1"){d.fn.checkPassword(x)}})},focusBlur:function(x,z){var y=d.extend({},a);d("body").on("focus",x,function(){var A=d(this).val();d(this).addClass("focus");if(A==z){d(this).val("")}d(x).siblings(y.hintWord).hide()});d("body").on("blur",x,function(){var A=d(this).val();d(this).removeClass("focus");if(A==""){d(this).val(z)}switch(x){case".userName1":if(d(x).val()=="请输入用户名"){d(x).siblings(a.hintWord).show().text("*请输入用户名")}else{d.fn.checkUsername()}break;case".phone1":if(!d.fn.isPhoneNo(A)){d(x).siblings(a.hintWord).show().text("*请输入正确的手机号码")}break;case".userName2":console.log(d(x).val().length);if(d(x).val()=="手机号/用户名/邮箱"){d(x).siblings(a.hintWord).show().text("*请输入手机号/用户名/邮箱")}break;case"#name":console.log(d(x).val().length);if(d(x).val()=="手机号/用户名/邮箱"){d(x).siblings(a.hintWord).show().text("*请输入手机号/用户名/邮箱")}break}})},checkUsername:function(){var y=d(".userName1");var z=encodeURI(y.val());var x=d.fn.hintWord;z=d.trim(z);if(z){d.ajax({url:v+"/ajax/ajaxRegister.php",data:"from=checkUsername&username="+z,type:"POST",dataType:"jsonp",success:function(A){if(A.code==1){y.siblings(x).show().text("")}else{y.siblings(x).show().text("*"+A.msg)}},cache:false})}else{y.siblings(x).show().text("*请输入用户名")}},checkPassword:function(y){var y=d(y).val();var z=d(".password1");var x=d.fn.hintWord;if(y){if(y.length>=6&&y.length<=16){if(/^[0-9a-zA-Z!@#$%^&*()_+|?\/-=]{6,16}$/m.test(y)){if(!/^[0-9]{6,16}$/m.test(y)){z.siblings(x).hide()}else{z.siblings(x).show().text("*密码不能为纯数字")}}else{z.siblings(x).show().text("*密码不能包含特殊字符")}}else{z.siblings(x).show().text("*密码长度为6-16位字符")}}else{z.siblings(x).show().text("*请您输入密码")}},getSendCode:function(y){k=d(".phone").val();o=d(".phoneCode").val();var x=d("#onlycode").val();d.ajax({url:v+"/ajax/getCode.php",type:"get",dataType:"jsonp",data:{onlycode:x,phone:k,usetype:y,sendtype:1},success:function(z){if(z.code==1){d(".phone").siblings(a.hintWord).hide()}else{d(".phone").siblings(a.hintWord).show().html("*"+z.msg)}}})},isPhoneNo:function(y){var x=/^1[34578]\d{9}$/;return x.test(y)},phoneTime:function(){var y=d(this).val();var x=d(this);var z=d(".getPhoneCode");if(y==""){z.removeClass("sendBtnAfter");z.removeClass("sendBtnNo")}else{if(!d.fn.isPhoneNo(y)){if(z.hasClass("sendBtnAfterIs")){d(this).siblings(a.hintWord).show().text("*请倒计时结束后再点击获取验证码")}else{d(this).siblings(a.hintWord).show().text("*请输入正确的手机号码");z.addClass("sendBtnNo");z.removeClass("sendBtnAfter")}}else{d(this).siblings(a.hintWord).hide();if(!z.hasClass("sendBtnAfterIs")){z.removeClass("sendBtnNo");z.addClass("sendBtnAfter")}}}},countDownTime:function(x,z,y){u=z;b=setInterval(function(){if(u==0){x.removeClass("sendBtnNo");x.removeClass("sendBtnAfterIs");x.html(y);clearInterval(b)}else{u--;x.html(u+"s")}},1000)},getNewsNumber:function(){d.ajax({url:v+"/ajax/ajaxNotice.php?callback=jQuery171012816668872340653_1520991468998&_=1520991469066",data:"",type:"POST",dataType:"jsonp",success:function(y){var x=y.priv+y.reply+y.station+y.pm+y.integration;if(x>0){d("#global-num").show().text(x)}z(d(".priv"),y.priv);z(d(".reply"),y.reply);z(d(".station"),y.station);z(d(".pm"),y.pm);z(d(".integral"),y.integration);function z(B,A){if(A>0){B.find("em").html("("+A+")")}}},cache:false})},hintWord:function(){var x=d(this).parents("li");d(this).hide();x.find("input").focus()},removejscssfile:function(C,z){var y=(z=="js")?"script":(z=="css")?"link":"none";var B=(z=="js")?"src":(z=="css")?"href":"none";var x=document.getElementsByTagName(y);for(var A=x.length;A>=0;A--){if(x[A]&&x[A].getAttribute(B)!=null&&x[A].getAttribute(B).indexOf(C)!=-1){x[A].parentNode.removeChild(x[A])}}},loadjscssfile:function(y,x){if(x=="js"){var z=document.createElement("script");z.setAttribute("type","text/javascript");z.setAttribute("src",y)}else{if(x=="css"){var z=document.createElement("link");z.setAttribute("rel","stylesheet");z.setAttribute("type","text/css");z.setAttribute("href",y)}}if(typeof z!="undefined"){document.getElementsByTagName("head")[0].appendChild(z)}},successLogin:function(x){f=d.fn.topReadCookie("bbusername").substring(0,10);d("#xiding").html(m);d("#user-name").html(f+'<i class="triangle-icon"></i>');d("#logout").attr("href","https://my.fengniao.com/login.php?action=logout&url="+e);d.fn.getNewsNumber();d.fn.closeBox();d.fn.cleatTime()},closeBox:function(y){var x=d.extend({},a);l=0;d(x.TanBox).remove();d.fn.removejscssfile("https://icon.fengniao.com/login/css/loginCss.css","css");d.fn.removejscssfile("https://static.geetest.com/static/tools/gt.js","js");d.fn.removejscssfile("https://my.fengniao.com/icon/js/md5.js","js");d.fn.removejscssfile("https://my.fengniao.com/icon/js/jquery.cookie.js","js");d.fn.cleatTime();d("body").unbind();d("#globaSitePersonNav li").hover(function(){d(this).addClass("hover");d(this).find(".dropdown-items").show()},function(){d(this).removeClass("hover");d(this).find(".dropdown-items").hide()})},loginOut:function(){d.fn.deleteCookie("bbusername");d.fn.deleteCookie("bbpassword");d.fn.deleteCookie("bbuserid");location.reload();d("#logout").attr("href","https://my.fengniao.com/login.php?action=logout&url="+e);d("#xiding").html('<ul class="login-box"><li><a href="javascript:;" target="_self" class="login-link"><i class="icon"></i>登录</a></li><li><a href="javascript:;" target="_self" class="registerBtn">免费注册</a></li></ul>')},topSetCookie:function(x,z,y){d.cookie(x,z,{expires:y,path:"/"})},topReadCookie:function(x){var A="";var y=x+"=";if(document.cookie.length>0){offset=document.cookie.indexOf(y);if(offset!=-1){offset+=y.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}var z=document.cookie.substring(offset,end);A=decodeURIComponent(z.replace(/\+/g," "))}}return A},deleteCookie:function(x){d.cookie(x,null,{expires:-1,path:"/"})},cleatTime:function(){u=0;clearInterval(b);clearInterval(t);clearInterval(h);clearInterval(j)}})})(jQuery);